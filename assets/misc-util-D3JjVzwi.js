import{y as g,l as He,s as u,j as E,r as Q,i as _e,k as Z,p as Y,x as v,O as B,z as J,t as $}from"./index-BS8tfVS8.js";import{C as d,c as re,p as X,b as D}from"./music-BPU2Vumq.js";const y={EVERTORCH:{name:"Evertorch",description:"This torch emits an ethereal luminescent glow in the presence of danger.",display:!1,image:"/assets/images/items/equipment/evertorch.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["You have a greater chance of successfully overcoming traps."],stats:{}},SUNSTONE:{name:"Sunstone",description:"",display:!0,image:"/assets/images/items/equipment/sunstone.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["Undead in your presence take 2 damage at the start of each round of combat."],stats:{}},RITUAL_BLADE:{name:"Ritual Blade",description:"",display:!1,image:"/assets/images/items/equipment/ritual-blade.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+3 Attack when attacking humanoid and beast type enemies."],stats:{}},SPIRIT_VEIL_CLOAK:{name:"Spirit Veil Cloak",description:"",display:!0,image:"/assets/images/items/equipment/spirit-veil-cloak.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["All attacks have a 5% chance of missing."],stats:{}},RING_OF_AMBUSH:{name:"Ring of Ambush",description:"",display:!1,image:"/assets/images/items/equipment/ring-of-ambush.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+2 Speed"],stats:{agility:{speed:2}}},RUNE_ETCHED_RING:{name:"Rune-etched Ring",description:"",display:!1,image:"/assets/images/items/equipment/rune-etched-ring.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+2 Spell Power"],stats:{arcana:{spellPower:2}}},SCOUNDRELS_EDGE:{name:"Scoundrel's Edge",description:"A dagger often carried by the wicked.",display:!1,image:"/assets/images/items/equipment/scoundrels-edge.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+1 Speed","+2 Mana Regeneration"],stats:{agility:{speed:1},strength:{attack:2}}},BONEMAIL:{name:"Bonemail",description:"",display:!1,image:"/assets/images/items/equipment/bonemail.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+10 Max HP"],stats:{strength:{maxHealth:10}}},ANCIENT_SHORTBOW:{name:"Ancient Shortbow",description:"",display:!1,image:"/assets/images/items/equipment/ancient-shortbow.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+2 Attack"],stats:{strength:{attack:2}}},SKULL_SCEPTER:{name:"Skull Scepter",description:"",display:!1,image:"/assets/images/items/equipment/skull-scepter.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,effect:["+10 Max MP"],stats:{arcana:{maxMana:10}}},BLOODSTONE:{name:"Bloodstone",description:"",display:!1,image:"/assets/images/items/equipment/bloodstone.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["You recover a small amount of HP after defeating an enemy."],stats:{}},WRAITHBANE:{name:"Wraithbane",description:"",display:!1,image:"/assets/images/items/equipment/wraithbane.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["Your attacks ignore the Incorporeal condition."],stats:{}},CURSED_MIRROR:{name:"Cursed Mirror",description:"",display:!1,image:"/assets/images/items/equipment/cursed-mirror.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["A portion of damage taken from attacks is reflected back to the attacker."],stats:{}},REVENANTS_RAGE:{name:"Revenants Rage",description:"",display:!1,image:"/assets/images/items/equipment/revenants-rage.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["Attacks deal an +5 damage while below 30HP."],stats:{}},PLAUGEWARD_PENDANT:{name:"Plagueward Pendant",description:"",display:!1,image:"/assets/images/items/equipment/plagueward-pendant.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["You are immune to the Poisoned condition."],stats:{}},GHOSTSHROUD_TALISMAN:{name:"Ghostshroud Talisman",description:"",display:!1,image:"/assets/images/items/equipment/ghostshroud-talisman.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["You are immune to the Haunted condition."],stats:{}},CHILLBREAKER_BAND:{name:"Chillbreaker Band",description:"",display:!1,image:"/assets/images/items/equipment/chillbreaker-band.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["You are immune to the Chilled condition."],stats:{}},SOULREAVER:{name:"Soulreaver",description:"",display:!1,image:"/assets/images/items/equipment/soulreaver.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["You gain +1 Attack for each consecutive attack up to a max of +5."],stats:{}},RATTLEBONE_WHISTLE:{name:"Rattlebone Whistle",description:"",display:!1,image:"/assets/images/items/equipment/rattlebone-whistle.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["When used in combat, there is a chance humanoids will flee from you."],stats:{}},SKULLBREAKER_HELM:{name:"Skullbreaker Helm",description:"",display:!1,image:"/assets/images/items/equipment/rattlebone-whistle.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["Your Attack deals and additional +5 damage to enemies below 30% their max HP."],stats:{}},SPINE_OF_THE_NECROMANCER:{name:"Spine of the Necromancer",description:"Staff",display:!1,image:"/assets/images/items/equipment/spine-of-the-necromancer.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["+12 Spell Power","-1 Agility","-1 Strength"],stats:{strength:{strengthChange:-1},agility:{agilityChange:-1},arcana:{spellPower:12}}},ECHOING_BLADE:{name:"Echoing Blade",description:"",display:!1,image:"/assets/images/items/equipment/echoing-blade.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["20% chance for Attacks to hit the same enemy twice."],stats:{}},MAGE_BLADE:{name:"MAGE_BLADE",description:"",display:!1,image:"/assets/images/items/equipment/mage-blade.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["Recover +5 MP on each Attack","+10 max MP"],stats:{}},WAND_OF_BITING_COLD:{name:"Wand of Biting Cold",description:"",display:!1,image:"/assets/images/items/equipment/soulreaver.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["+10% damage for spells that deal Cold damage."],stats:{}},WAND_OF_FRENZIED_FLAME:{name:"Wand of Frenzied Flame",description:"",display:!1,image:"/assets/images/items/equipment/soulreaver.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,effect:["+10% damage for spells that deal Fire damage."],stats:{}},WAND_OF_TEMPEST_WRATH:{name:"Wand of Tempest Wrath",description:"",display:!1,image:"/assets/images/items/equipment/soulreaver.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["+10% damage for spells that deal Lightning damage."],stats:{}},TOMBSTONE_DEFENDER:{name:"Tombstone Defender",description:"Shield",display:!1,image:"/assets/images/items/equipment/tombstone-defender.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["+50 Max HP","-2 Defense"],stats:{strength:{maxHP:50},agility:{defense:-2}}},CRIMSON_OFFERING:{name:"Crimson Offering",description:"Scepter",display:!1,image:"/assets/images/items/equipment/crimson-offering.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["You sacrifice 5HP after each successful Attack, but you deal an additional 10 damage."],stats:{}},DARKGUARD_TRINKET:{name:"Darkguard Trinket",description:"",display:!1,image:"/assets/images/items/equipment/darkguard-trinket.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["You are immune to the Cursed condition."],stats:{}},HALLOWED_HOURGLASS:{name:"Hallowed Hourglass",description:"",display:!1,image:"/assets/images/items/equipment/darkguard-trinket.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["The cooldowns of all ally abilities are reduced by 2 actions."],stats:{}},BONE_AMALGAM:{name:"Bone Amalgam",description:"",display:!1,image:"/assets/images/items/equipment/bone-amalgam.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["you gain temporary HP after defeating a creature with bones. You can accumulate a max of 30 temporary HP."],stats:{}},BONECHILL_AMULET:{name:"Bonechill Amulet",description:"",display:!1,image:"/assets/images/items/equipment/bonechill-amulet.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["Humanoid and Beast type enemies start combat with the Chilled condition."],stats:{}},HELLFIRE_CHARM:{name:"Hellfire Charm",description:"",display:!1,image:"/assets/images/items/equipment/rattlebone-whistle.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["Humanoid and Beast type enemies start combat with the Burning condition."],stats:{}},UNHOLY_EFFIGY:{name:"Unholy Effigy",description:"",display:!1,image:"/assets/images/items/equipment/unholy-effigy.jpg",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,effect:["You recover 1MP for each point of damage you receive."],stats:{}},PLAGUEBORN_SHAWL:{name:"Plagueborn Shawl",description:"",display:!1,image:"/assets/images/items/equipment/plagueborn-shawl.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Plagueborn Set",setBonus:["You gain +8 HP Regeneration for each stack of the Diseased condition you possess."],effect:["+10 Max HP"],stats:{strength:{maxHealth:10}}},PLAGUEBORN_HANDWRAPS:{name:"Plagueborn Handwraps",description:"",display:!1,image:"/assets/images/items/equipment/plagueborn-hand-wraps.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Plagueborn Set",setBonus:["You gain +8 HP Regeneration for each stack of the Diseased condition you possess."],effect:["+2 Attack"],stats:{strength:{attack:2}}},PLAGUEBORN_LEGWRAPS:{name:"Plagueborn Legwraps",description:"",display:!1,image:"/assets/images/items/equipment/plagueborn-leg-wraps.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Plagueborn Set",setBonus:["You gain +8 HP Regeneration for each stack of the Diseased condition you possess."],effect:["+1 Hit"],stats:{agility:{hitChance:1}}},SHADOWBOUND_COWL:{name:"Shadowbound Cowl",description:"",display:!1,image:"/assets/images/items/equipment/shadowbound-cowl.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Shadowbound Set",setBonus:["When guarding, you have a chance to meld into the shadows, causing enemies to be unable to target you."],effect:["+1 Defense"],stats:{agility:{defense:1}}},SHADOWBOUND_BOOTS:{name:"Shadowbound Boots",description:"",display:!1,image:"/assets/images/items/equipment/shadowbound-boots.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Shadowbound Set",setBonus:["When guarding, you have a chance to meld into the shadows, causing enemies to be unable to target you."],effect:["+10 Max MP"],stats:{arcana:{maxMana:10}}},SHADOWBOUND_BRACERS:{name:"Shadowbound Bracers",description:"",display:!1,image:"/assets/images/items/equipment/shadowbound-bracers.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Shadowbound Set",setBonus:["When guarding, you have a chance to meld into the shadows, causing enemies to be unable to target you."],effect:["+1 Hit"],stats:{agility:{hitChance:1}}},GHOULBONE_CHESTPIECE:{name:"Ghoulbone Chestpiece",description:"",display:!1,image:"/assets/images/items/equipment/ghoulbone-chestpiece.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Ghoulbone Set",setBonus:["You gain +8 Attack against undead enemies."],effect:["+2 Attack"],stats:{strength:{attack:2}}},GHOULBONE_PAULDRON:{name:"Ghoulbone Pauldron",description:"",display:!1,image:"/assets/images/items/equipment/ghoulbone-pauldron.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Ghoulbone Set",setBonus:["You gain +8 Attack against undead enemies."],effect:["+2 HP Regen."],stats:{strength:{healthRegen:2}}},GHOULBONE_HELMET:{name:"Ghoulbone Helmet",description:"",display:!1,image:"/assets/images/items/equipment/ghoulbone-helmet.jpg",type:"EQUIPMENT",rarity:"Common",useInCombat:!1,set:"Ghoulbone Set",setBonus:["You gain +8 Attack against undead enemies."],effect:["+10 Max Health"],stats:{strength:{maxHealth:10}}},ARCANIST_CROWN:{name:"Arcanist Crown",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Arcanist Set",setBonus:["."],effect:["+10 Max MP","+2 MP Regen."],stats:{arcana:{maxMana:10,manaRegen:2}}},ARCANIST_MANTLE:{name:"Arcanist Mantle",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Arcanist Set",setBonus:["."],effect:["+10 Max MP","+2 Spell Power"],stats:{arcana:{maxMana:10,spellPower:2}}},ARCANIST_ROBES:{name:"Arcanist Robes",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Arcanist Set",setBonus:["."],effect:["+20 Max MP"],stats:{arcana:{maxMana:20}}},DARKMOON_NECKLACE:{name:"Darkmoon Necklace",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Darkmoon Set",setBonus:["."],effect:["+4 MP Regen."],stats:{arcana:{manaRegen:4}}},DARKMOON_TRINKET:{name:"Darkmoon Trinket",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Darkmoon Set",setBonus:["."],effect:["+2 MP Regen.","+2 HP Regen."],stats:{arcana:{manaRegen:2},strength:{healthRegen:2}}},DARKMOON_CIRCLET:{name:"Darkmoon Circlet",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Darkmoon Set",setBonus:["."],effect:["+2 MP Regen.","+10 Max MP"],stats:{arcana:{manaRegen:2,maxMana:10}}},FANGWEAVE_ARMOR:{name:"Fangweave Armor",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Fangweave Set",setBonus:["."],effect:["+1 Defense","+1 Speed"],stats:{agility:{defense:1,speed:1}}},FANGWEAVE_STRIDERS:{name:"Fangweave Striders",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Fangweave Set",setBonus:["."],effect:["+2 Speed"],stats:{agility:{speed:2}}},FANGWEAVE_GLOVES:{name:"Fangweave Gloves",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Fangweave Set",setBonus:["."],effect:["+1 Hit","+1 Speed"],stats:{agility:{hitChance:1,speed:1}}},FIENDSWORN_REAVER:{name:"Fiendsworn Reaver",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Fiendsworn Set",setBonus:["."],effect:["+2 Spell Power","+2 Attack"],stats:{arcana:{spellPower:2},strength:{attack:2}}},FIENDSWORN_GAUNTLETS:{name:"Fiendsworn Gauntlets",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Fiendsworn Set",setBonus:["."],effect:["+10 Max MP","+2 Attack"],stats:{arcana:{maxMana:10},strength:{attack:2}}},FIENDSWORN_MASK:{name:"Fiendsworn Mask",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Fiendsworn Set",setBonus:["."],effect:["+2 MP Regen.","+2 Attack"],stats:{arcana:{manaRegen:2},strength:{attack:2}}},RATTLEBONE_CHESTPLATE:{name:"Rattlebone Chestplate",description:"",display:!1,image:"/assets/images/items/equipment/rattlebone-chestplate.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Rattlebone Set",setBonus:["When starting combat against humanoid & beast type enemies their is a chance they will gain the Feared condition."],effect:["+2 Attack","+10 Max MP"],stats:{strength:{attack:2},arcana:{maxMana:10}}},RATTLEBONE_HELMET:{name:"Rattlebone Helmet",description:"",display:!1,image:"/assets/images/items/equipment/rattlebone-helmet.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Rattlebone Set",setBonus:["When starting combat against humanoid & beast type enemies their is a chance they will gain the Feared condition."],effect:["+10 Max HP","+2 Spell Power"],stats:{strength:{maxHealth:10},arcana:{spellPower:2}}},RATTLEBONE_GAUNTLETS:{name:"Rattlebone Guantlets",description:"",display:!1,image:"/assets/images/items/equipment/rattlebone-gauntlets.jpg",type:"EQUIPMENT",rarity:"Rare",useInCombat:!1,set:"Rattlebone Set",setBonus:["When starting combat against humanoid & beast type enemies their is a chance they will gain the Feared condition."],effect:["+2 HP Regen.","+2 MP Regen."],stats:{strength:{healthRegen:2},arcana:{manaRegen:2}}},DREADMOURNE_HELM:{name:"Dreadmourne Helm",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,set:"Dreadmourne Set",setBonus:["."],effect:["+4 HP Regen.","+1 Hit"],stats:{strength:{healthRegen:4},agility:{hitChance:1}}},DREADMOURNE_PLATEMAIL:{name:"Dreadmourne Platemail",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,set:"Dreadmourne Set",setBonus:["."],effect:["+30 Max HP"],stats:{strength:{maxHealth:30}}},DREADMOURNE_SHIELD:{name:"Dreadmourne Shield",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,set:"Dreadmourne Set",setBonus:["."],effect:["+20 Max HP","+1 Defense"],stats:{strength:{maxHealth:20},agility:{defense:1}}},SOULSHROUD_HOOD:{name:"Soulshroud Hood",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,set:"Soulshroud Set",setBonus:["."],effect:["+4 MP Regen.","+1 Speed"],stats:{agility:{speed:1},arcana:{manaRegen:4}}},SOULSHROUD_ROBE:{name:"Soulshroud Robe",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,set:"Soulshroud Set",setBonus:["."],effect:["+20 Max MP","+1 Defense"],stats:{agility:{defense:1},arcana:{maxMana:20}}},SOULSHROUD_STAFF:{name:"Soulshroud Staff",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Epic",useInCombat:!1,set:"Soulshroud Set",setBonus:["."],effect:["+4 Spell Power","+1 Hit"],stats:{agility:{hitChance:1},arcana:{spellPower:4}}},LICHS_CROWN:{name:"Lich's Crown",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Legendary",useInCombat:!1,set:" Set",setBonus:["."],effect:["+10 MP Regen.","-4 HP Regen."],stats:{strength:{healthRegen:-4},arcana:{manaRegen:10}}},LICHS_REGALIA:{name:"Lich's Regalia",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Legendary",useInCombat:!1,set:" Set",setBonus:["."],effect:["+50 Max MP","-20 Max HP"],stats:{strength:{maxHealth:-20},arcana:{maxMana:50}}},LICHS_SCEPTER:{name:"Lich's Scepter",description:"",display:!1,image:"",type:"EQUIPMENT",rarity:"Legendary",useInCombat:!1,set:" Set",setBonus:["."],effect:["+10 Spell Power","-4 Attack"],stats:{strength:{attack:-4},arcana:{spellPower:10}}}},P={BURNING:{name:"Burning",display:!0,image:"/assets/images/status-effect/burning.jpg",type:"DEBUFF",description:"The target takes Fire damage at the start of each of its turns.",effect:[""],durationType:"ROUND",duration:3,reset:3,stats:{},function:"BURNING",when:"START TURN"},POISONED:{name:"Poisoned",display:!0,image:"/assets/images/status-effect/poisoned.jpg",type:"DEBUFF",stack:1,get effect(){return[`The target takes ${this.stack} damage at the end of each of its turns.`,"HP Regeneration is reduced to 0"]},durationType:"ROOM",duration:5,reset:5,stats:{strength:{healthRegen:-999}},function:"POISONED",when:"END TURN"},CHILLED:{name:"Chilled",display:!0,image:"/assets/images/status-effect/chilled.jpg",type:"DEBUFF",stack:1,get effect(){return[`-${this.stack} Agility`]},durationType:"ROUND",duration:3,reset:3,get stats(){return{agility:{agilityChange:-1*this.stack}}}},STUNNED:{name:"Stunned",display:!0,image:"/assets/images/status-effect/stunned.jpg",type:"DEBUFF",effect:["The target can't take an action on its turn."],durationType:"ROUND",duration:1,reset:1,stats:{}},DISEASED:{name:"Diseased",display:!0,image:"/assets/images/status-effect/diseased.jpg",type:"DEBUFF",stack:1,get effect(){return[`Max Health reduced by ${this.stack*20}%`]},durationType:"ROOM",duration:5,reset:5,stats:{}},WITHERED:{name:"Withered",display:!0,image:"/assets/images/status-effect/withered.jpg",type:"DEBUFF",stack:1,get effect(){return[`Max Health reduced by ${this.stack*20}%`]},durationType:"ROOM",duration:5,reset:5,stats:{}},CURSED:{name:"Cursed",display:!0,image:"/assets/images/status-effect/cursed.jpg",type:"DEBUFF",stack:1,get effect(){return[`Max Health reduced by ${this.stack*20}%`]},durationType:"ROOM",duration:5,reset:5,stats:{}},HAUNTED:{name:"Haunted",display:!0,image:"/assets/images/status-effect/haunted.jpg",type:"DEBUFF",effect:["You are haunted."],durationType:"ROOM",duration:10,reset:10,stats:{},function:"HAUNTED",when:"BEFORE COMBAT"},RESTRAINED:{name:"Restrained",display:!0,image:"/assets/images/status-effect/restrained.jpg",type:"DEBUFF",description:"The target is unable to move freely.",effect:["The target can only take the Guard action."],durationType:"ROUND",duration:1,reset:1,stats:{}},GUARD:{name:"Guarding",display:!0,image:"/assets/images/status-effect/guard.jpg",type:"BUFF",description:"Guarding from incoming attacks.",effect:["Defense +50%"],durationType:"ROUND",duration:1,reset:1,stats:{}},INCORPOREAL:{name:"Incorporeal",display:!0,image:"/assets/images/status-effect/incorporeal.jpg",type:"BUFF",description:"The undead lacks a physical body.",effect:["Attack damage dealt to the undead is reduced by 50%"],stats:{},function:!1}},le={THIEVES_RUIN_MAP:{name:"Thieves' Ruin Map",description:"",image:"/assets/images/items/misc-items/map-1.jpg",type:"MISC",rarity:"Rare",useInCombat:!1,effect:["A map that leads to Thieves' Ruin.","Can only be used in The Great Catacomb."],destination:10,audio:[!1,"item","map",.7]},LAUGHING_COFFIN_COIN:{name:"Laughing Coffin Coin",description:"",image:"/assets/images/items/consumables/laughing-coffin-coin.jpg",type:"CONSUMABLE",rarity:"Rare",useInCombat:!1,effect:[""],audio:[!1,"item","coinFlipLand"]}},C={HOUND:"HOUND",HUMANOID:"HUMANOID",UNDEAD:"UNDEAD",DEMON:"DEMON"},M={PHYSICAL:"PHYSICAL",FIRE:"FIRE",POISON:"POISON",RADIANT:"RADIANT"},b={DECREPIT_SKELETON:{name:"Decrepit Skeleton",identifier:"ENEMY",get image(){return A("/assets/images/enemies/decrepit-skeleton",5)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{spawn:[!0,"undeadSpawn",null,.5],attack:[!0,"lightWeapon"],death:[!0,"boneBreak"]},level:1,currentHealth:10,currentMana:0,stats:{baseStrength:0,baseAgility:0,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"ERRATIC",statusEffects:[],lootTable:[{item:d.GRAVEBLOOM,probability:.05},{item:d.ROTBANE_FERN,probability:.05},{item:d.MARROWSTONE_CHEESE,probability:.05},{item:d.CRYPTBREAD,probability:.05},{item:d.SKELETON_KEY,probability:.01},{item:y.BONEMAIL,probability:.01},{item:null,probability:.78}]},SKELETAL_WARRIOR:{name:"Skeletal Warrior",identifier:"ENEMY",get image(){return A("/assets/images/enemies/skeletal-warrior",3)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{spawn:[!0,"undeadSpawn",null,.5],attack:[!0,"heavyWeapon",null,.5],death:[!0,"armorClankToTheGround",.7]},level:2,currentHealth:40,currentMana:0,stats:{baseStrength:2,baseAgility:0,baseArcana:0},passive:{name:"Rattle of War",description:"Undead enemies have their Attack increased while in the presence of a skeletal warrior.",when:"START_OF_ROUND",function:"RATTLE_OF_WAR"},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"DOMINANT",statusEffects:[],lootTable:[{item:d.GRAVEBLOOM,probability:.05},{item:d.ROTBANE_FERN,probability:.05},{item:d.MARROWSTONE_CHEESE,probability:.05},{item:d.CRYPTBREAD,probability:.05},{item:d.SKELETON_KEY,probability:.02},{item:y.BONEMAIL,probability:.02},{item:y.GHOULBONE_HELMET,probability:.01},{item:null,probability:.75}]},SKELETAL_ARCHER:{name:"Skeletal Archer",identifier:"ENEMY",get image(){return A("/assets/images/enemies/skeletal-archer",3)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{spawn:[!0,"undeadSpawn",null,.5],attack:[!0,"shootArrow"],death:[!0,"boneBreak"]},level:2,currentHealth:20,currentMana:0,stats:{baseStrength:0,baseAgility:2,baseArcana:0},abilityA:{name:"Multi-shot",description:"The skeletal archer fires an additional arrow at a random target.",cooldown:3,reset:3,focus:"HEROES",function:"MULTI_SHOT"},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"RUTHLESS",statusEffects:[],lootTable:[{item:d.GRAVEBLOOM,probability:.05},{item:d.ROTBANE_FERN,probability:.05},{item:d.MARROWSTONE_CHEESE,probability:.05},{item:d.CRYPTBREAD,probability:.05},{item:d.SKELETON_KEY,probability:.02},{item:y.ANCIENT_SHORTBOW,probability:.02},{item:y.GHOULBONE_GREAVES,probability:.01},{item:null,probability:.75}]},SKELETAL_MAGE:{name:"Skeletal Mage",identifier:"ENEMY",get image(){return A("/assets/images/enemies/skeletal-mage",3)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{spawn:[!0,"undeadSpawn",null,.5],attack:[!1,"magic","iceWand"],death:[!0,"boneBreak"]},level:2,currentHealth:30,currentMana:0,stats:{baseStrength:0,baseAgility:0,baseArcana:2},abilityA:{name:"Chill of the Grave",description:"The skeletal mage conjures a ghostly hand, assailing a target with the chill of the grave.",cooldown:3,reset:3,focus:"HEROES",function:"CHILL_OF_THE_GRAVE"},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"ASTUTE",statusEffects:[],lootTable:[{item:d.GRAVEBLOOM,probability:.05},{item:d.ROTBANE_FERN,probability:.05},{item:d.MARROWSTONE_CHEESE,probability:.05},{item:d.CRYPTBREAD,probability:.05},{item:d.SKELETON_KEY,probability:.02},{item:y.SKULL_SCEPTER,probability:.02},{item:y.GHOULBONE_ARMGUARDS,probability:.01},{item:null,probability:.75}]},BONE_TITAN:{name:"Bone Titan",identifier:"ENEMY",image:"",type:C.UNDEAD,get image(){return A("/assets/images/enemies/bone-titan",4)},get icon(){return`${this.image}-icon`},level:5,currentHealth:90,currentMana:0,stats:{baseStrength:5,baseAgility:0,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},REAPER:{name:"Reaper",identifier:"ENEMY",get image(){return A("/assets/images/enemies/reaper",4)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:5,currentHealth:60,currentMana:0,stats:{baseStrength:1,baseAgility:4,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},GRAVE_WITCH:{name:"Grave Witch",identifier:"ENEMY",get image(){return A("/assets/images/enemies/grave-witch",5)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:6,currentHealth:40,currentMana:0,stats:{baseStrength:1,baseAgility:2,baseArcana:3},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},DEATH_KNIGHT:{name:"Death Knight",identifier:"ENEMY",get image(){return A("/assets/images/enemies/death-knight",4)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:7,currentHealth:40,currentMana:0,stats:{baseStrength:4,baseAgility:3,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},FLOOD_OF_BONES:{name:"Flood of Bones",identifier:"ENEMY",get image(){return A("/assets/images/enemies/flood-of-bones",4)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:8,currentHealth:160,currentMana:0,stats:{baseStrength:8,baseAgility:0,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"ERRATIC",statusEffects:[]},CORPSE_ORACLE:{name:"Corpse Oracle",identifier:"ENEMY",get image(){return A("/assets/images/enemies/corpse-oracle",4)},get icon(){return`${this.image}-icon`},type:C.HUMANOID,level:3,currentHealth:0,currentMana:0,stats:{baseStrength:0,baseAgility:2,baseArcana:1},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"ERRATIC",statusEffects:[P.INCORPOREAL],lootTable:[]},REAPER:{name:"Reaper",identifier:"ENEMY",get image(){return A("/assets/images/enemies/reaper",3)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:5,currentHealth:60,currentMana:0,stats:{baseStrength:1,baseAgility:4,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},GHAST:{name:"Ghast",identifier:"ENEMY",get image(){return A("/assets/images/enemies/ghast",1)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:5,currentHealth:60,currentMana:0,stats:{baseStrength:1,baseAgility:4,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},REAVER:{name:"Reaver",identifier:"ENEMY",get image(){return A("/assets/images/enemies/reaver",1)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,level:5,currentHealth:60,currentMana:0,stats:{baseStrength:1,baseAgility:4,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:["POISONED"],behavior:"RANDOM",statusEffects:[]},WANDERING_WISP:{name:"Wandering Wisp",identifier:"ENEMY",get image(){return A("/assets/images/enemies/wandering-wisp",3)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{death:[!1,"death","wispDeath",1.2],spawn:[!1,"death","wispDeath",1.2],attack:[!0,"ghostAttack",null]},level:1,currentHealth:0,currentMana:0,stats:{baseStrength:0,baseAgility:0,baseArcana:0},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"DEFENSIVE",statusEffects:[P.INCORPOREAL],lootTable:[]},SHADOW:{name:"Shadow",identifier:"ENEMY",get image(){return A("/assets/images/enemies/shadow",4)},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{spawn:[!0,"shadowSpawn",null,.6],attack:[!0,"ghostAttack",null,.8],death:[!1,"death","shadowDeath",.8]},level:2,currentHealth:10,currentMana:0,stats:{baseStrength:0,baseAgility:2,baseArcana:0},abilityA:{name:"Haunt",description:"The shadow inflicts the Haunted condition to an enemy.",cooldown:0,reset:9,focus:"HEROES",function:"HAUNT"},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"AGGRESSIVE",statusEffects:[P.INCORPOREAL],lootTable:[]},BANSHEE:{name:"Banshee",identifier:"ENEMY",get image(){return"/assets/images/enemies/banshee"},get icon(){return`${this.image}-icon`},type:C.UNDEAD,audio:{spawn:[!0,"shadowSpawn",null,.8],attack:[!0,"ghostAttack",null],death:[!1,"death","bansheeDeath"]},level:3,currentHealth:0,currentMana:0,stats:{baseStrength:0,baseAgility:2,baseArcana:1},weaknesses:[M.RADIANT],resistances:[],immunities:[],behavior:"ERRATIC",statusEffects:[P.INCORPOREAL],lootTable:[]}},q={THIEF:{name:"Thief",identifier:"ENEMY",get image(){return A("/assets/images/enemies/thief",4)},get icon(){return`${this.image}-icon`},type:C.HUMANOID,audio:{spawn:[!1,"spawn","swordFromSheath3"],attack:[!0,"lightWeapon"],death:[!0,"fightGrunt"]},level:2,currentHealth:20,currentMana:0,stats:{baseStrength:0,baseAgility:2,baseArcana:0},abilityA:{name:"Venom Strike",description:"The thief deals damage to an enemy equal to his Attack and inflicts the Poisoned condition.",cooldown:0,reset:3,focus:"LOWEST_HEALTH",function:"VENOM_STRIKE"},weaknesses:[],resistances:[],immunities:[],behavior:"RUTHLESS",statusEffects:[],lootTable:[{item:d.MARROWSTONE_CHEESE,probability:.05},{item:d.CRYPTBREAD,probability:.05},{item:d.HEALTH_POTION,probability:.05},{item:y.PLAGUEBORN_SHAWL,probability:.01},{item:y.PLAGUEBORN_LEGWRAPS,probability:.01},{item:y.PLAGUEBORN_HANDWRAPS,probability:.01},{item:y.RING_OF_AMBUSH,probability:.02},{item:y.SCOUNDRELS_EDGE,probability:.02},{item:le.LAUGHING_COFFIN_COIN,probability:.15},{item:null,probability:.63}]}},Le={name:"Dungeon Entrance",type:"ENTRANCE",description:[""],options:[{text:["Enter"],function:"DUNGEON_ENTRANCE_ENTER"}]},Pe={name:"Coffin",type:"CHOICE",description:["An ornately decorated coffin is found.","Do you wish to open it?"],options:[{text:["Open"],function:"COFFIN",outcome:"Disregarding the sanctity of a burial site, you opened the coffin to see what was inside."},{text:["Leave"],function:"COFFIN",outcome:"You decided to leave the coffin, and not disturb the dead resting within."}]},we={name:"Gravestone",type:"CHOICE",description:["A worn and damaged gravestone is found"],options:[{text:["Leave"],function:"GRAVESTONE",outcome:"You came across a gravestone in the catacomb. You decided to leave the gravestone just as you discovered it."}]},ve={name:"Bonevault",type:"CHOICE",description:["You discover a locked door.","Do you wish to unlock it?"],options:[{text:["Unlock"],function:"BONEVAULT",outcome:"You discovered a locked door in the catacomb. You used a Skeleton Key to open the door."},{text:["Leave"],function:"BONEVAULT",outcome:"You discovered a locked door in the catacomb. You decided not to open it."}]},Be={name:"Candlelight Shrine",type:"CHOICE",description:["You discover a Candlelight Shrine."],options:[{text:["Rest"],function:"CANDLELIGHT_SHRINE",outcome:"You discovered a Candlelight Shrine and rested for a short time in the flickering light. When it was time to leave you felt energized and ready to move onward."}]},ee={SIGGURD:{name:"Unlocking Siggurd",type:"AUTO",characters:[{identifier:"HERO",name:"Siggurd"},b.DECREPIT_SKELETON,b.DECREPIT_SKELETON,b.DECREPIT_SKELETON],description:[""],function:"UNLOCK_HERO_SIGGURD",outcome:"You found Siggurd, the paladin, while exploring The Great Catacomb and aided him in defeating a hoard of undead. You decide to fight together as you continue on."},LIHETH:{name:"Unlocking Liheth",type:"CHOICE",characters:[{identifier:"HERO",name:"Liheth"}],description:[""],function:"UNLOCK_HERO_LIHETH",options:[{text:["Rest"],function:"UNLOCK_HERO_LIHETH",outcome:"You found Liheth, the Candlelight Priestess, while exploring The Great Catacomb. She spoke to you of her duties to restore the hidden Candlelight Shrines throughout the catacomb. You decided to guide her through the catacomb in search of these shrines."}]}},Ue={name:"Ambush",type:"CHOICE",characters:[q.THIEF,q.THIEF,q.THIEF],description:["You are ambushed by thieves.","They demand you surrender your items or suffer the consequence."],options:[{text:["Surrender"],function:"AMBUSH",outcome:"You were ambushed by thieves. The thieves took what they wanted from your inventory, but left you unharmed."},{text:["Refuse"],function:"AMBUSH",outcome:"You were ambushed by thieves. You refused to surrender your items to the thieves and defended yourself against their assault."}]},te={WAILING_WARRENS_ENTRANCE:{name:"Wailing Warrens",type:"CHOICE",description:["Haunting wails echo from behind the looming door.","Do you wish to enter?"],options:[{text:["Enter"],function:"PATH_ENTRANCE",outcome:"The wisp lead you to the Wailing Warrens and you decided to enter."},{text:["Leave"],function:"PATH_ENTRANCE",outcome:"The wisp lead you to the Wailing Warrens and you decided not to enter."}]},THIEVES_RUIN_ENTRANCE:{name:"Thieves' Ruin",type:"CHOICE",description:["The entrance to Thieves' Ruin lies before you.","Do you wish to enter?"],options:[{text:["Enter"],function:"PATH_ENTRANCE",outcome:"The map lead you to Thieves' Ruin and you decided to enter."},{text:["Leave"],function:"PATH_ENTRANCE",outcome:"The wisp lead you to Thieves' Ruin and you decided to enter."}]}},ae={WAILING_WARRENS_EXIT:{name:"Wailing Warrens Exit",type:"CHOICE",description:["You discovered an exit out of Wailing Warrens."],options:[{text:["Leave"],function:"PATH_EXIT",outcome:"You left Wailing Warrens."}]},THIEVES_RUIN_EXIT:{name:"Thieves' Ruin Exit",type:"CHOICE",description:["You discovered an exit out of Thieves' Ruin."],options:[{text:["Leave"],function:"PATH_EXIT",outcome:"You left Thieves' Ruin."}]}},xe={POISON_DARTS:{name:"Poison Darts",type:"TRAP",description:["A hidden mechanism triggers a volley of poison darts from the walls."],options:[{text:["Shield","(Strength)"],function:"TRAP",narration:"You attempt to shield yourself using nearby debris."},{text:["Dodge","(Agility)"],function:"TRAP",narration:"You attempt to dodge the incoming darts."}]},POISONOUS_MIST:{name:"Poisonous Mist",type:"TRAP",description:["The room fills with a noxious green mist."],options:[{text:["Hold Breath","(Strength)"],function:"TRAP",narration:"You attempt to hold your breath and quickly find an exit."},{text:["Find Vent","(Agility)"],function:"TRAP",narration:"You attempt to locate and open an opening to disperse the poisonous mist."}]},FLOOR_SPIKES:{name:"Floor Spikes",type:"TRAP",description:["Pressure plates on the floor trigger spikes to shoot up."],options:[{text:["Leap Over","(Strength)"],function:"TRAP",narration:"You attempt to leap over the pressure plates to avoid the spikes."},{text:["Disarm","(Agility)"],function:"TRAP",narration:"You attempt to disarm the pressure plates to render the trap harmless."}]},LAUGHING_COFFIN:{name:"Laughing Coffin",type:"TRADE",description:["You entered the Laughing Coffin Tavern"],options:[{text:["Trade"],function:"LAUGHING_COFFIN",outcome:"You discovered the Laughing Coffin Tavern hidden within Thieves' Ruin."},{text:["Leave"],function:"LAUGHING_COFFIN",outcome:"You discovered the Laughing Coffin Tavern hidden within Thieves' Ruin."}]}},G={siggurd:[{questNumber:0,unlocked:!0,name:"Catacomb Cleanser",text:'"The undead have defiled these sacred halls for too long. We must purge this place of their evil. Help me cleanse the catacombs."',description:"Defeat 30 undead enemies.",progress:0,completion:30,finished:!1,reward:"Siggurd Level 2"},{questNumber:1,unlocked:!1,name:"Wails of the Banshee",text:'"Within the Wailing Warrens, a hidden area within The Great Catacomb, dwells a Banshee whose cries bring death and despair. We must find a way into those haunted depths and silence her wails."',description:"Defeat the Banshee within the Wailing Warrens.",progress:0,completion:1,finished:!1,reward:"Siggurd Level 3"},{questNumber:2,unlocked:!1,name:"Divine Retribution",text:`"To cleanse these halls, I must wield the holy power of Smite. Every strike shall be a testament to the light's strength. Join me in using Smite against these abominations."`,description:"Use Smite 50 times.",progress:0,completion:50,finished:!1,reward:"Siggurd Level 4"},{questNumber:3,unlocked:!1,name:"Ghastly Judgment",text:'"A vile ghast lurks in the depths, spreading corruption. Its presence is a blight upon these sacred grounds. We must track it down and deliver divine judgment."',description:"Slay the Ghast.",progress:0,completion:1,finished:!1,reward:"Siggurd Level 5"},{questNumber:4,unlocked:!1,name:"Reaver's Demise",text:'"Among the foul creatures, a Reaver stands as a terror to all who wander these halls. Its brutal nature must be met with holy steel. We shall be its end."',description:"Slay the Reaver.",progress:0,completion:1,finished:!1,reward:"Siggurd Level 6"},{questNumber:5,unlocked:!1,name:"Guardian of Faith",text:'"Divine Guardian is a shield against the darkness. By invoking it, we protect the purity of our mission. Let us cast this holy protection and fortify our resolve."',description:"Cast Divine Guardian 50 times.",progress:0,completion:50,finished:!1,reward:"Siggurd Level 7"},{questNumber:6,unlocked:!1,name:"Knights of Death",text:'"Death Knights, corrupted warriors of a dark past, stalk these halls. Their presence is a blasphemy against the light. We shall confront them and purge their evil."',description:"Defeat 30 Death Knights.",progress:0,completion:30,finished:!1,reward:"Siggurd Level 8"},{questNumber:7,unlocked:!1,name:"Baron of Bone",text:'"Deep within the catacombs lies the Baron of Bone, a fearsome overlord of the undead. His reign of terror must be ended. Together, we will bring him to justice."',description:"Defeat the Baron of Bone.",progress:0,completion:1,finished:!1,reward:"Siggurd Level 9"}],liheth:[{questNumber:0,unlocked:!0,name:"Shrines of Light",text:'"The Candlelight Shrines hold ancient power that guides and protects. We must seek out these six shrines and rekindle their sacred flames to restore their light."',description:"Find 6 Candlelight Shrines with Liheth.",progress:0,completion:3,finished:!1,reward:"Liheth Level 2"},{questNumber:1,unlocked:!1,name:"Flames of Purity",text:'"The Cleansing Flames are a manifestation of our purity and resolve. Together, we will use this holy fire to purge the darkness from these halls."',description:"Use Cleansing Flames 30 times.",progress:0,completion:30,finished:!1,reward:"Liheth Level 3"},{questNumber:2,unlocked:!1,name:"Stolen Light",text:'"The sacred Shrine Candles have been stolen by malevolent forces. We must recover these candles to restore the light they once provided."',description:"Recover 10 stolen Shrine Candles.",progress:0,completion:10,finished:!1,reward:"Liheth Level 4"},{questNumber:3,unlocked:!1,name:"Lost Sanctuary",text:'"A lost shrine in the Wailing Warrens has fallen toto the evil spirits that reside there. We must cleanse this shrine of evil to renew its sanctity and restore its light."',description:"Cleanse the loast shrine in the Wailing Warrens.",progress:0,completion:1,finished:!1,reward:"Liheth Level 5"},{questNumber:4,unlocked:!1,name:"",text:'""',description:"",progress:0,completion:30,finished:!1,reward:"Liheth Level 6"},{questNumber:5,unlocked:!1,name:"Undying Flame",text:'"The Undying Flame is a beacon of hope and resilience. By casting this flame, we shall fortify our spirits and ward off the encroaching darkness."',description:"Cast Undying Flame 30 times.",progress:0,completion:30,finished:!1,reward:"Liheth Level 7"},{questNumber:6,unlocked:!1,name:"Sisters of the Flame",text:'"Two of our sisters remain hidden, their light yet unfound. We must locate the other candlelight priestesses to strengthen our sacred circle."',description:"Find the other 2 remaining candlelight Priestesses.",progress:0,completion:2,finished:!1,reward:"Liheth Level 8"},{questNumber:7,unlocked:!1,name:"Ritual of Restoration",text:'"The candlelight priestesses must complete their ritual to restore the sacred light. You must defend us from any threats that arise until our task is done."',description:"Defend the candlelight priestesses while they complete their ritual to restore the light.",progress:0,completion:1,finished:!1,reward:"Liheth Level 9"}],riven:[]};function Ge(t,e,a){t(g.levelUpHero({name:e,map:a})),t(He.levelUpHero({name:e,map:a}))}const We={siggurd:{2:{level:2,strength:3,agility:0,arcana:1},3:{level:3,strength:3,agility:1,arcana:1},4:{level:4,strength:4,agility:1,arcana:1},5:{level:5,strength:4,agility:1,arcana:2},6:{level:6,strength:5,agility:1,arcana:2},7:{level:7,strength:5,agility:1,arcana:3},8:{level:8,strength:6,agility:1,arcana:3},9:{level:9,strength:6,agility:2,arcana:3}},riven:{TWO:{level:2,strength:1,agility:3,arcana:0},THREE:{level:3,strength:1,agility:4,arcana:0},FOUR:{level:4,strength:2,agility:4,arcana:0},FIVE:{level:5,strength:2,agility:5,arcana:0},SIX:{level:6,strength:2,agility:6,arcana:0},SEVEN:{level:7,strength:2,agility:7,arcana:0},EIGHT:{level:8,strength:2,agility:8,arcana:0},NINE:{level:9,strength:3,agility:8,arcana:0}},liheth:{TWO:{level:2,strength:0,agility:1,arcana:3},THREE:{level:3,strength:1,agility:1,arcana:3},FOUR:{level:4,strength:1,agility:1,arcana:4},FIVE:{level:5,strength:1,agility:2,arcana:4},SIX:{level:6,strength:1,agility:2,arcana:5},SEVEN:{level:7,strength:1,agility:3,arcana:5},EIGHT:{level:8,strength:1,agility:3,arcana:6},NINE:{level:9,strength:2,agility:3,arcana:6}}};function Fe(t,e){const a=u.getState().combat.order;switch(e){case"SLAY":{const s=a.find(n=>n.id==="Siggurd");if(s){const n=G.siggurd.find(i=>i.unlocked&&!i.finished);se(t,s,n)}}case"EVENT":{const s=a.find(n=>n.id==="Liheth");if(s){const n=G.liheth.find(i=>i.unlocked&&!i.finished);Ye(t,s,n)}}break;case"USE":{const s=a.find(n=>n.id==="Siggurd");if(s){const n=G.siggurd.find(i=>i.unlocked&&!i.finished);se(t,s,n)}}}}function Ye(t,e,a){const s=u.getState().dungeon.contents.event,n=u.getState().player;switch(a.questNumber){case 0:s&&s.name==="Candlelight Shrine"&&a.progress++;break;case 1:e.abilityA.cooldown===0&&a.progress++;break;case 2:order.find(i=>i.name==="Wandering Wisp"&&i.currentHealth<=0),banshee&&a.progress++;break;case 3:{const i=n.inventory.miscItems.filter(o=>o.name==="Shrine Candle");a.progress=i.length}break;case 4:s&&s.name==="Desiccated Shrine"&&a.progress++;break;case 5:e.abilityB.cooldown===0&&a.progress++;break;case 6:break;case 7:break;default:return}ce(t,"liheth",e,a)}function se(t,e,a){const s=u.getState().combat.order;switch(a.questNumber){case 0:s.find(i=>i.type==="UNDEAD"&&i.currentHealth<=0)&&a.progress++;break;case 1:s.find(i=>i.name==="Banshee"&&i.currentHealth<=0)&&a.progress++;break;case 2:e.abilityA.cooldown===0&&a.progress++;break;case 3:s.find(i=>i.name==="Ghast"&&i.currentHealth<=0)&&a.progress++;break;case 4:s.find(i=>i.name==="Reaver"&&i.currentHealth<=0)&&a.progress++;break;case 5:e.abilityB.cooldown===0&&a.progress++;break;case 6:s.find(i=>i.name==="Death Knight"&&i.currentHealth<=0)&&a.progress++;break;case 7:s.find(i=>i.name==="Baron of Bone"&&i.currentHealth<=0)&&a.progress++;break;default:return}ce(t,"siggurd",e,a)}function ce(t,e,a,s){const n=G[e];if(s.progress>=s.completion){if(s.finished=!0,a.level<9){const o=We[e][a.level+1];Ge(t,a.name,o)}if(s.questNumber!==n.length-1){const i=G[e];i[s.questNumber+1].unlocked=!0}}}function je(t,e){if(u.getState().combat.order.find(n=>n.name===t)){const n=t.toLowerCase();return G[n].some(r=>r.name===e&&r.unlocked&&!r.finished)}}const qe="_container_1lv3w_29",Ve="_left_1lv3w_39",Ke="_right_1lv3w_42",Qe="_items_1lv3w_59",H={"trade-modal":"_trade-modal_1lv3w_1",container:qe,left:Ve,right:Ke,"player-favor":"_player-favor_1lv3w_46",items:Qe,"item-effect":"_item-effect_1lv3w_121","no-favor":"_no-favor_1lv3w_125"};function $e({children:t,...e}){return E.jsxs("li",{...e,children:[" ",t]})}function ne({item:t,count:e,onTrade:a,favorAvailable:s}){const n=s<x(t)?H["no-favor"]:"";return E.jsx($e,{onClick:()=>a(t),style:{backgroundImage:`url(${t.image})`},className:n,children:E.jsx("span",{children:e>1?`x${e}`:""})})}const Xe="_container_15kqx_1",ze="_tooltip_15kqx_6",Ze="_title_15kqx_33",Je="_text_15kqx_39",et="_description_15kqx_43",tt="_detail_15kqx_47",at="_threat_15kqx_55",st="_skill_15kqx_170",nt="_effect_15kqx_212",it="_item_15kqx_377",ot="_common_15kqx_423",rt="_rare_15kqx_429",lt="_epic_15kqx_434",ct="_legendary_15kqx_439",w={container:Xe,tooltip:ze,title:Ze,text:Je,description:et,detail:tt,threat:at,"tomes-info-container":"_tomes-info-container_15kqx_80","tomes-info":"_tomes-info_15kqx_80","attributes-info-container":"_attributes-info-container_15kqx_116","attributes-info":"_attributes-info_15kqx_116",skill:st,effect:nt,"right-middle":"_right-middle_15kqx_255","spell-list-container":"_spell-list-container_15kqx_294","bottom-left":"_bottom-left_15kqx_300","room-summary-icon":"_room-summary-icon_15kqx_339",item:it,common:ot,rare:rt,epic:lt,legendary:ct};function ie({title:t,text:e,detailOne:a,detailTwo:s,detailThree:n,detailFour:i,children:o,position:r="tooltip",container:m="container"}){const[p,k]=Q.useState(!1);let l={title:"",text:"",detailOne:"",detailTwo:"",detailThree:""};const I=()=>{k(!0)},N=()=>{k(!1)};return r==="item"&&(l.title="",l.text=e.toLowerCase(),l.detailOne="description",l.detailTwo="",l.detailThree=""),E.jsxs("div",{className:w[m],onMouseEnter:I,onMouseLeave:N,children:[o,p&&E.jsxs("div",{className:`${w[r]}`,children:[t&&E.jsx("p",{className:`${w.title}`,children:t}),e&&E.jsx("p",{className:`${w.text} ${w[l.text]}`,children:e}),a&&E.jsx("p",{className:`${w[l.detailOne]}`,children:a}),s&&E.jsx("p",{className:`${w[l.detailTwo]}`,children:s}),n&&E.jsx("p",{className:`${w[l.detailThree]}`,children:n}),i&&E.jsx("p",{className:`${w[l.detailFour]}`,children:i})]})]})}function Ht(){const t=_e(),e=Z(l=>l.dungeon.contents.event),a=Z(l=>l.combat.order.find(I=>I.id==="Player")),s=e.items;let n,i;const o=dt(e.name,a);switch(e.name){case"Laughing Coffin":n="Tavern Keeper",i=a.favor.laughingCoffin;break}const r=Q.useMemo(()=>{const l=[];return s.forEach(I=>{const N=l.find(U=>U.name===I.name);N?N.counter++:l.push({...I,counter:1})}),l},[s]),m=Q.useMemo(()=>{const l=[];return o.forEach(I=>{const N=l.find(U=>U.name===I.name);N?N.counter++:l.push({...I,counter:1})}),l},[o]),p=l=>{t(g.changeFavor({change:"INCREASE",trader:e.name,favor:x(l)})),t(g.changePlayerInventory({item:l,change:"REMOVE"})),l.name==="Laughing Coffin Coin"&&Y(!1,"item","coinFlipLand")},k=l=>{i>=x(l)&&(t(v.changeTradeItems(l)),t(g.changePlayerInventory({item:l,change:"ADD"})),t(g.changeFavor({change:"DECREASE",trader:e.name,favor:x(l)})),Y(!1,"ui","trade"))};return E.jsxs("div",{className:H["trade-modal"],children:[E.jsx("h1",{children:e.name}),E.jsxs("div",{className:H.container,children:[E.jsxs("div",{className:H.left,children:[E.jsx("h2",{children:n}),E.jsx("ul",{className:H.items,children:r.map(l=>E.jsx(ie,{className:H.item,position:"right-middle",title:l.name,text:l.rarity,detailOne:l.description,detailTwo:l.effect.map((I,N)=>E.jsx("span",{className:H["item-effect"],children:I},N)),detailThree:`Favor: -${x(l)}`,children:E.jsx(ne,{item:l,count:l.counter,onTrade:k,favorAvailable:i},l.id)},l.id))})]}),E.jsxs("div",{className:H.right,children:[E.jsx("h2",{children:a.name}),E.jsxs("ul",{className:H.items,children:[m.map(l=>E.jsx(ie,{className:H.item,position:"right-middle",title:l.name,text:l.rarity,detailOne:l.description,detailTwo:l.effect.map((I,N)=>E.jsx("span",{className:H["item-effect"],children:I},N)),detailThree:`Favor: +${x(l)}`,children:E.jsx(ne,{item:l,count:l.counter,onTrade:p},l.id)},l.id)),m.length===0&&E.jsxs("p",{children:["You have nothing the ",n," desires."]})]})]})]}),E.jsxs("p",{className:H["player-favor"],children:["Favor: ",i]})]})}function ut(t){let e=[];switch(t){case"Laughing Coffin":e.push({...d.BLACKHEART_BREW,id:B()},{...d.BLACKHEART_BREW,id:B()},{...d.BLACKHEART_BREW,id:B()},{...d.CRYPTBREAD,id:B()});break}return e}function dt(t,e){let a=[];switch(t){case"Laughing Coffin":a=e.inventory.consumables.filter(s=>s.name==="Laughing Coffin Coin");break}return a}function x(t){let e;switch(t.rarity){case"Common":e=10;break;case"Rare":e=25;break;case"Epic":e=100;break;case"Legendary":e=250;break}return e}function _t(t,e){let a={name:"",following:null,followCounter:0,path:null,pathCounter:null,roomCounter:0,threat:0,image:null,music:null,contents:{enemies:[],items:[],event:Le}};switch(e){case"The Great Catacomb":a.name="The Great Catacomb",a.following=null,a.followCounter=0,a.path=null,a.pathCounter=null,a.threat=0,a.image="/assets/images/backgrounds/the-great-catacomb/catacomb-entrance-3",a.contents;break}t(v.updateRoom(a))}function Lt(t){const e=u.getState().dungeon;let a={...e,followCounter:e.followCounter>0?e.followCounter-1:e.followCounter,pathCounter:e.pathCounter>0?e.pathCounter-1:e.pathCounter,roomCounter:e.roomCounter+1,threat:e.threat+1,danger:!0,image:null,music:null,contents:{roomName:"",enemies:[],items:[],event:null}};switch(e.followCounter===0&&t(v.endFollowing()),mt()){case"EVENT":a.contents.event=ft();break;case"ENEMIES":a.contents.enemies=ht();break;case"EXIT PATH":a.contents.event=bt()}oe(a)._src!==re._src&&X(oe(a)),a.image=Et(a),t(v.updateRoom(a))}function mt(){const t=u.getState().dungeon,e=t.pathCounter;let a=Math.floor(Math.random()*101),s;switch(t.name){case"The Great Catacomb":a>80?s="EVENT":s="ENEMIES",t.path==="Wailing Warrens"&&(s="ENEMIES"),t.path==="Thieves' Ruin"&&(s="ENEMIES",(t.pathCounter===4||a>999)&&(s="EVENT")),t.following&&(s="ENEMIES"),t.followCounter===1&&(s="EVENT")}return t.path&&e<=0&&e!==null&&(s="EXIT PATH"),s}function ft(){const t=u.getState().hero.heroes,e=t.find(o=>o.id==="Siggurd"),a=t.find(o=>o.id==="Liheth"),s=u.getState().dungeon;let n=[];switch(s.name){case"The Great Catacomb":!s.path&&!s.following&&(s.threat<20&&n.push(we),s.threat<20&&n.push(Ue),n.push(Pe),n.push(ve),e.unlocked||n.push(ee.SIGGURD),a.unlocked?n.push(Be):n.push(ee.LIHETH)),s.following==="Thieves' Ruin Map"&&s.followCounter===1&&n.push(te.THIEVES_RUIN_ENTRANCE),s.following==="Wandering Wisp"&&s.followCounter===1&&n.push(te.WAILING_WARRENS_ENTRANCE),s.path==="Wailing Warrens"||s.path==="Thieves' Ruin"&&s.pathCounter===4&&n.push({...xe.LAUGHING_COFFIN,items:ut("Laughing Coffin")});break}const i=Math.floor(Math.random()*n.length);return n[i]}function ht(){const t=u.getState().dungeon,e=u.getState().dungeon.threat;let a=[],s,n;switch(t.path){case"Wailing Warrens":je("Siggurd","Wails of the Banshee")&&t.pathCounter===1?(s=[{enemy:b.BANSHEE,probability:1}],n=1):(s=[{enemy:b.WANDERING_WISP,probability:.1},{enemy:b.SHADOW,probability:.9}],n=2);break;case"Thieves' Ruin":s=[{enemy:q.THIEF,probability:1}],n=Math.ceil(Math.random()*3),n=6;break;default:s=[{enemy:b.DECREPIT_SKELETON,probability:.7},{enemy:b.SKELETAL_WARRIOR,probability:.1},{enemy:b.SKELETAL_ARCHER,probability:.1},{enemy:b.SKELETAL_MAGE,probability:.1}],e>60?s=[{enemy:b.GRAVE_WITCH,probability:.2},{enemy:b.BONE_TITAN,probability:.3},{enemy:b.REAPER,probability:.3},{enemy:b.DEATH_KNIGHT,probability:.1},{enemy:b.FLOOD_OF_BONES,probability:.1}]:e>40?s=[{enemy:b.GRAVE_WITCH,probability:.1},{enemy:b.BONE_TITAN,probability:.3},{enemy:b.REAPER,probability:.3},{enemy:b.CORPSE_ORACLE,probability:.2}]:e>20&&(s=[{enemy:b.BONE_TITAN,probability:.1},{enemy:b.REAPER,probability:.1},{enemy:b.CORPSE_ORACLE,probability:.2},{enemy:b.SKELETAL_WARRIOR,probability:.2},{enemy:b.SKELETAL_ARCHER,probability:.2},{enemy:b.SKELETAL_MAGE,probability:.2}]),n=0,e>=80?n=5:e>=60?n=Math.floor(Math.random()*2)+4:e>=40?n=Math.floor(Math.random()*2)+3:e>=20?n=Math.floor(Math.random()*2)+2:n=Math.floor(Math.random()*2)+1;break}for(let i=0;i<n;i++){let o=Math.random(),r=0;const m=gt([...s]);for(const{enemy:p,probability:k}of m)if(r+=k,o<=r){a.push(pt(p));break}}return a}function gt(t){for(let e=t.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}function pt(t){const e=V(t.stats),a=t.image,s={...t,image:a,icon:`${a}-icon`,stats:e,id:B(),damageDisplay:[]};return t.abilityA&&(s.abilityA={...t.abilityA,cooldown:K(t.abilityA.reset)}),t.abilityB&&(s.abilityB={...t.abilityB,cooldown:K(t.abilityB.reset)}),s}function V(t){return{baseStrength:t.baseStrength,strength:{totalStrength:0,attack:0,maxHealth:0,healthRegen:0},baseAgility:t.baseAgility,agility:{totalAgility:0,defense:0,speed:0,hitChance:0},baseArcana:t.baseArcana,arcana:{totalArcana:0,spellPower:0}}}function Et(t){let e;switch(t.name){case"The Great Catacomb":e=A("/assets/images/backgrounds/the-great-catacomb/catacomb",26);break}if(t.path)switch(t.path){case"Wailing Warrens":e=A("/assets/images/backgrounds/wailing-warrens/wailing-warrens",12);break;case"Thieves' Ruin":e=A("/assets/images/backgrounds/thieves-ruin/thieves-ruin",9);break}if(t.contents.event)switch(t.contents.event.name){case"Gravestone":e=A("/assets/images/backgrounds/events/gravestone",5);break;case"Coffin":e=A("/assets/images/backgrounds/events/coffin",7);break;case"Bonevault":e=A("/assets/images/backgrounds/events/bonevault-door",6);break;case"Unlocking Liheth":case"Candlelight Shrine":e=A("/assets/images/backgrounds/events/candlelight-shrine",7);break;case"Wailing Warrens":case"Wailing Warrens Exit":e=A("/assets/images/backgrounds/wailing-warrens/wailing-warrens-door",1);break;case"Thieves' Ruin":case"Thieves' Ruin Exit":e=A("/assets/images/backgrounds/thieves-ruin/thieves-ruin-door",2);break;case"Laughing Coffin":e=A("/assets/images/backgrounds/thieves-ruin/laughing-coffin-tavern",1);break}return e}function bt(){switch(u.getState().dungeon.path){case"Wailing Warrens":return ae.WAILING_WARRENS_EXIT;case"Thieves' Ruin":return ae.THIEVES_RUIN_EXIT}}function oe(t){let e;switch(t.name){case"The Great Catacomb":e=D.threeThousandYearsOld;break}if(t.path)switch(t.path){case"Wailing Warrens":{const a=[D.hauntedOutpost,D.fightThrough],s=Math.floor(Math.random()*a.length);e=a[s]}break;case"Thieves' Ruin":e=D.hiddenCapacity;break}if(t.contents.event)switch(t.contents.event.name){case"Ambush":e=D.unfinishedBusiness;break;case"Gravestone":e=D.pileOfBones;break;case"Coffin":e=D.pileOfBones;break;case"Bonevault":e=D.pileOfBones;break;case"Unlocking Siggurd":e=D.warningSignal;break;case"Unlocking Liheth":case"Candlelight Shrine":e=D.mindReading;break;case"Wailing Warrens":e=D.basementNightmare;break;case"Wailing Warrens Exit":e=D.basementNightmare;break;case"Thieves' Ruin":e=D.threeThousandYearsOld;break;case"Thieves' Ruin Exit":e=D.threeThousandYearsOld;break;case"Laughing Coffin":e=D.unfinishedBusiness;break}return e}function Pt(){const t=u.getState().dungeon;let e;switch(t.name){case"The Great Catacomb":{const a=["weCantStopThem","passedDanger","finalBrigade","migrano","warningSignal"],s=Math.floor(Math.random()*a.length);e=a[s]}break}if(t.path)switch(t.path){case"Wailing Warrens":{const a=["hauntedOutpost","fightThrough"],s=Math.floor(Math.random()*a.length);e=a[s]}break;case"Thieves' Ruin":e="hiddenCapacity";break}e&&`/assets/audio/music/${e}.mp3`!==re._src&&(X(D[e]),X(D[e]))}function L(t){const e=u.getState().spellbook;for(let a in e)if(e.hasOwnProperty(a)){for(let s in e[a])if(e[a].hasOwnProperty(s)){for(let n of e[a][s])if(n.name===t)return n.points}}return null}function yt(t,e){const a=e.lootTable;if(e.identifier!=="ENEMY")return;const s=ue(a);s&&t(v.addItem(s))}function At(t){for(let e=t.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}function wt(t){const e=u.getState().dungeon;let a=[];switch(e.threat>60||e.threat>40||e.threat>20,e.contents.event.name){case"Bonevault":a=[{item:y.RATTLEBONE_CHESTPLATE,probability:.1},{item:y.RATTLEBONE_GAUNTLETS,probability:.1},{item:y.RATTLEBONE_HELMET,probability:.1},{item:y.RATTLEBONE_WHISTLE,probability:.05},{item:y.SOULREAVER,probability:.05},{item:y.REVENANTS_RAGE,probability:.05},{item:y.SKULLBREAKER_HELM,probability:.05},{item:y.SPINE_OF_THE_NECROMANCER,probability:.025},{item:y.TOMBSTONE_DEFENDER,probability:.025},{item:null,probability:.45}];break;case"Coffin":a=[{item:d.CRYPTBREAD,probability:.1},{item:d.MARROWSTONE_CHEESE,probability:.1},{item:d.HEALTH_POTION,probability:.1},{item:d.MANA_POTION,probability:.1},{item:d.SKELETON_KEY,probability:.02},{item:y.EVERTORCH,probability:.05},{item:y.SUNSTONE,probability:.05},{item:y.CURSED_MIRROR,probability:.02},{item:y.PLAUGEWARD_PENDANT,probability:.02},{item:y.GHOSTSHROUD_TALISMAN,probability:.02},{item:y.CHILLBREAKER_BAND,probability:.02},{item:null,probability:.4}];break;case"Unlocking Liheth":case"Candlelight Shrine":a=[{item:d.WARDING_CANDLE,probability:.167},{item:d.SOOTHING_CANDLE,probability:.167},{item:d.CALMING_CANDLE,probability:.167},{item:d.INVOKING_CANDLE,probability:.167},{item:d.FLICKERING_CANDLE,probability:.167},{item:d.BLAZING_CANDLE,probability:.167}];break;case"Ambush":a=[{item:le.THIEVES_RUIN_MAP,probability:.99},{item:null,probability:.01}]}const s=ue(a);s&&t(v.addItem(s))}function ue(t){const e=u.getState().combat.order,a=Math.random();let s=0;e.some(o=>o.name==="Riven")&&(s+=.05);const i=At([...t]);for(const o of i)if(s+=o.probability,a<s)return o.item?{...o.item,id:B()}:void 0}const Rt={CRYPTBREAD:(t,e)=>{O(t,e,"HEAL",15)},HEALTH_POTION:(t,e)=>{const a=Math.round(e.stats.strength.maxHealth*.3);O(t,e,"HEAL",a)},MANA_POTION:(t,e)=>{const a=Math.round(e.stats.arcana.maxMana*.3);t(g.updateMana({change:"ADD",value:a})),t(g.updateDamageDisplay({id:e.id,content:{item:a,style:"gain-mana"}}))},MARROWSTONE_CHEESE:(t,e)=>{O(t,e,"HEAL",15)},ROTBANE_FERN:(t,e)=>{O(t,e,"DAMAGE",3),Math.random()*100>50&&T(t,e,"REMOVE",P.DISEASED)},GRAVEBLOOM:(t,e)=>{O(t,e,"DAMAGE",3)},GHOSTLIGHT_LILY:(t,e)=>{Math.random()*100>50&&T(t,e,"ADD",P.HAUNTED)},SUNSHADE_BLOSSOM:(t,e)=>{O(t,e,"HEAL",1)},WITCHFIRE_ORCHID:(t,e)=>{O(t,e,"DAMAGE",3)},LICHROOT:(t,e)=>{O(t,e,"DAMAGE",5)},TOMBSTONE_TRUFFLE:(t,e)=>{O(t,e,"HEAL",3)},SPIDER_EGG_YOLK:(t,e)=>{T(t,e,"ADD",P.POISONED)},BLACKHEART_BREW:(t,e)=>{T(t,e,"ADD",{name:"Blackheart Brew",display:!0,image:"/assets/images/items/consumables/blackheart-brew.jpg",description:"",effect:["+5 Attack","-5 Spell Power"],durationType:"ROOM",duration:5,stats:{strength:{attack:5},arcana:{spellPower:-5}}})},HEXBANE_BREW:(t,e)=>{T(t,e,"ADD",{name:"Hexbane Brew",display:!0,image:"",description:"Immune to the Poisoned, Diseased, Haunted, and Cursed conditions.",effect:["+5 Attack","-5 Spell Power"],durationType:"ROOM",duration:10,stats:{}})},NECROTIC_NECTAR:(t,e)=>{const a={name:"Necrotic Nectar",display:!0,image:"",description:"Immune to the Poisoned, Diseased, Haunted, and Cursed conditions.",effect:["+5 Attack","-5 Spell Power"],durationType:"ROOM",duration:10,stats:{arcana:{arcanaChange:e.stats.arcana.totalArcana}}};O(t,e,"HEAL",e.stats.strength.maxHealth),T(t,e,"ADD",a)},WARDING_CANDLE:(t,e)=>{T(t,e,"ADD",{name:"Warding Candle",display:!0,image:"",description:"",effect:["Undead enemies may flee from you."],durationType:"ROOM",duration:10,stats:{}})},SOOTHING_CANDLE:(t,e)=>{T(t,e,"ADD",{name:"Soothing Candle",display:!0,image:"/assets/images/items/consumables/soothing-candle.jpg",description:"",effect:["+6 HP Regeneration."],durationType:"ROOM",duration:10,stats:{strength:{healthRegen:6}}})},CALMING_CANDLE:(t,e)=>{T(t,e,"ADD",{name:"Calming Candle",display:!0,image:"/assets/images/items/consumables/calming-candle.jpg",description:"",effect:["+6 MP Regeneration."],durationType:"ROOM",duration:10,stats:{arcana:{manaRegen:6}}})},FLICKERING_CANDLE:(t,e)=>{T(t,e,"ADD",{name:"Flickering Candle",display:!0,image:"/assets/images/items/consumables/flickering-candle.jpg",description:"",effect:["+1 Agility."],durationType:"ROOM",duration:10,stats:{agility:{agilityChange:1}}})},BLAZING_CANDLE:(t,e)=>{T(t,e,"ADD",{name:"Blazing Candle",display:!0,image:"/assets/images/items/consumables/blazing-candle.jpg",description:"",effect:["+6 Attack."],durationType:"ROOM",duration:10,stats:{strength:{attack:6}}})},INVOKING_CANDLE:(t,e)=>{T(t,e,"ADD",{name:"Invoking Candle",display:!0,image:"/assets/images/items/consumables/invoking-candle.jpg",description:"",effect:["+6 Spell Power."],durationType:"ROOM",duration:10,stats:{arcana:{spellPower:6}}})},EVERTORCH:()=>3,SUNSTONE:t=>{const e=u.getState().combat.order;for(let a=0;a<e.length;a++)e[a].identifier==="ENEMY"&&e[a].type==="UNDEAD"&&O(t,e[a],"DAMAGE",1,"RADIANT")},RITUAL_BLADE:(t,e)=>{if(e.type==="BEAST"||e.type==="HUMANOID")return 3},SPIRIT_VEIL_CLOAK:()=>Math.floor(Math.random()*100)+1>95?999:0,BLOODSTONE:(t,e)=>{const s=u.getState().combat.order.find(i=>i.id==="Player"),n=e.level*3;O(t,s,"HEAL",n)},WRAITHBANE:()=>!0,CURSED_MIRROR:(t,e,a)=>{const s=Math.floor(a/3),n=Math.floor(Math.random()*s);O(t,e,"DAMAGE",n)},REVENANTS_RAGE:()=>{if(u.getState().combat.order.find(a=>a.id==="Player").currentHealth<30)return 5},THIEVES_RUIN_MAP:(t,e)=>{const a=u.getState().dungeon;if(a.following===null&a.followCounter===0){const s={...e,rooms:St(e)};t(v.beginFollowing({following:s.name,rooms:s.rooms}))}}};function de(t,e,a,s){const n=Nt(e),i=Rt[n],r=u.getState().combat.order.find(p=>p.id==="Player");if(!r)return!1;const m=r.inventory.attunedItems;for(let p=0;p<m.length;p++)if(m[p].name===e)return i(t,a,s);return!1}function Nt(t){return t.toUpperCase().replace(/\s+/g,"_")}function St(t){const e=u.getState().dungeon;let a;return t.destination&&(a=Math.abs(e.roomCounter-t.destination)),t==="Wandering Wisp"&&(a=Math.round(Math.random()*9)+1),a<5&&(a=5),a}function vt(t,e){t(J.changeUi({element:"modalIsVisible",visible:!0})),t(J.openModal({modal:e,open:!0})),u.getState().ui}async function O(t,e,a,s=0,n=null){let i=e.id;if(_(e,"Divine Guardian")&&(i="Siggurd"),n){let o=Math.random();if(n==="FIRE"){const r=L("Smoldering Heart");for(let m=0;m<r;m++)o+=.05;o>.95&&T(t,e,"ADD",P.BURNING)}if(n==="ICE"){const r=L("Frigid Gaze");for(let m=0;m<r;m++)o+=.04;o>.96&&T(t,e,"ADD",P.CHILLED)}if(n==="LIGHTNING"){const r=L("Charged Touch");for(let m=0;m<r;m++)o+=.03;o>.97&&T(t,e,"ADD",P.STUNNED)}}if(_(e,"Chilled")){const o=e.statusEffects.find(p=>p.name==="Chilled"),r=L("Frozen Solid");let m=1;for(let p=0;p<o.stack;p++)for(let k=0;k<r;k++)m+=.03;s=s*m}if(a==="DAMAGE"){for(let r=0;r<e.weaknesses.length;r++)e.weaknesses[r]===n&&(s=s*1.5);for(let r=0;r<e.resistances.length;r++)e.resistances[r]===n&&(s=s*.5);if(L("Arcane Shield")&&e.id==="Player"){const r=fe.ARCANE_SHIELD;r(t,null,e,"REMOVE",s);return}if(_(e,"Undying Flame")&&s>e.currentHealth){const r=e.stats.strength.maxHealth/2;t(g.updateHealth({id:i,change:"REPLACE",value:r})),T(t,e,"REMOVE",{name:"Undying Flame"});return}if(_(e,"Death Ward")&&s>e.currentHealth){t(g.updateHealth({id:i,change:"REPLACE",value:1})),T(t,e,"REMOVE",{name:"Death Ward"});return}if((_(e,"Barrier")||_(e,"Shell"))&&(s=s*.5,T(t,e,"REMOVE",{name:"Barrier"})),_(e,"Invulnerability")&&(s=s*0),_(e,"Incorporeal")&&!de(t,"Wraithbane")&&n===null&&a==="DAMAGE"&&(s=s/2),s=Math.round(s),n){const r=n.toLowerCase();t(g.updateDamageDisplay({id:i,content:{item:s,style:`${r}-damage`}}))}else t(g.updateDamageDisplay({id:i,content:{item:s,style:"damage"}}))}a==="HEAL"&&(s=Math.round(s),t(g.updateDamageDisplay({id:i,content:{item:s,style:"heal"}}))),t(g.updateHealth({id:i,change:a,value:s})),j(t,e.id),await me(t,i)}async function me(t,e){let s=u.getState().combat.order.find(n=>n.id===e);s.currentHealth<=0&&s.identifier==="ENEMY"&&(Fe(t,"SLAY"),yt(t,s),de(t,"Bloodstone",s)),s.currentHealth<=0&&s.identifier!=="PLAYER"&&(Tt(t,s),s.identifier==="ENEMY"&&(u.getState().dungeon.contents.enemies.find(o=>o.id===s.id)||t(v.addEnemy({change:"ADD",enemy:s}))))}function Tt(t,e){const a=u.getState().combat.order;e.name==="Siggurd"&&s(a,"Radiant Aura"),e.name==="Skeletal Warrior"&&a.filter(i=>i.name==="Skeletal Warrior").length<=1&&s(a,"Rattle of War");function s(n,i){for(let o=0;o<n.length;o++)for(let r=0;r<n[o].statusEffects.length;r++)n[o].statusEffects[r].name===i&&T(t,n[o],"REMOVE",n[o].statusEffects[r])}}const It=()=>{const t=u.getState().spellbook.abjuration,e=t.apprentice.find(s=>s.name==="Arcane Shield"),a=t.adept.find(s=>s.name==="Improved Arcane Shield");return{name:"Arcane Shield",display:!0,image:"/assets/images/spellbook/abjuration/arcane-shield.jpg",type:"BUFF",description:"A magical shield empowered by Abjuration spells.",get currentHealth(){return a.points*6},get maxHealth(){return e.points*9+9},get effect(){return[`${this.currentHealth}/${this.maxHealth}HP`]},reset:1,stats:{}}},fe={BURNING:(t,e)=>{let a=3;const s=L("Consuming Flames");for(let n=0;n<s;n++)a+=2;Y(!1,"statusEffects","burning"),O(t,e,"DAMAGE",a)},POISONED:(t,e)=>{const s=e.statusEffects.find(n=>n.name==="Poisoned").stack;O(t,e,"DAMAGE",s,"POISON"),Y(!1,"punch","punch1")},HAUNTED:t=>{if(u.getState().dungeon,Math.random()*100>50){const a=V(b.SHADOW.stats);let s={...b.SHADOW,id:B(),stats:a,damageDisplay:[]};console.log("SHADOW ADDED"),t(v.addEnemy({enemy:s,change:"ADD"}))}},STORM_SPHERE:(t,e)=>{const a=u.getState().player.stats.arcana.spellPower,s=Math.round(a/2);O(t,e,"DAMAGE",s,"LIGHTNING"),Y(!1,"magic","stormSphereDamage")},ARCANE_SHIELD:(t,e,a,s,n)=>{const i=a.statusEffects.find(m=>m.name==="Arcane Shield");let o=i.currentHealth;switch(t(g.updateStatusEffects({id:"Player",change:"REMOVE",statusEffect:i})),s){case"ADD":e.school==="Novice Abjuration"?o+=4:e.school==="Apprentice Abjuration"?o+=8:e.school==="Adept Abjuration"?o+=12:e.school==="Expert Abjuration"&&(o+=16);break;case"REMOVE":if(o-=n,n>o){const m=Math.round(n-o);t(g.updateDamageDisplay({id:"Player",content:{text:m,style:""}})),t(g.updateHealth({id:"Player",change:"DAMAGE",value:m})),me(t,"Player")}break;case"RESET":L("Improved Arcane Shield")*6>i.currentHealth&&t(g.updateStatusEffects({id:"Player",change:"ADD",statusEffect:It()}));return}o>i.maxHealth&&(o=i.maxHealth),o<0&&n&&(o=0);const r={...i,currentHealth:Math.round(o),get effect(){return[`${this.currentHealth}/${this.maxHealth}HP`]}};t(g.updateStatusEffects({id:"Player",change:"ADD",statusEffect:r}))}};function T(t,e,a,s){if(!e||!s)return;const n=u.getState().ui.dashboardIsVisible;if(e.identifier==="PLAYER"){let i;n?n&&(i=u.getState().player):i=u.getState().combat.order.find(r=>r.id==="Player"),e=i}else{const i=u.getState().combat.order,o=i.findIndex(r=>r.id===e.id);e=i[o]}if(!_(e,s.name)&&a==="ADD")n&&e.identifier==="PLAYER"?t($.updateStatusEffects({change:a,statusEffect:s})):t(g.updateStatusEffects({id:e.id,change:a,statusEffect:s}));else if(_(e,s.name)&&a==="ADD")if("stack"in s){const r=u.getState().combat.order.find(p=>p.id===e.id).statusEffects.find(p=>p.name===s.name);t(g.updateStatusEffects({id:e.id,change:"REMOVE",statusEffect:s}));let m;switch(s.name){case"Chilled":{m={...s,stack:r.stack+1,duration:s.reset,get effect(){return[`Agility -${this.stack}`]},get stats(){return{agility:{agilityChange:-1*this.stack}}}};break}case"Poisoned":{m={...s,stack:r.stack+1,duration:s.reset,get effect(){return[`The target takes ${this.stack} damage at the end of each of its turns.`,"HP Regeneration is reduced to 0"]}};break}case"Diseased":{m={...s,stack:r.stack+1,duration:s.reset,get effect(){return[`Max Health reduced by ${this.stack*20}%`]}};break}}t(g.updateStatusEffects({id:e.id,change:"ADD",statusEffect:m}))}else"reset"in s&&t(g.updateStatusEffectDuration({id:e.id,name:s.name,change:"RESET",reset:s.reset}));else a==="REMOVE"&&t(n?$.updateStatusEffects({change:a,statusEffect:s}):g.updateStatusEffects({id:e.id,change:a,statusEffect:s}));return Ct(t,e,s),j(t,e.id),!1}function _(t,e){return t.statusEffects.length>0&&t.statusEffects.findIndex(s=>s.name===e)!==-1}function Bt(t,e,a){const n=u.getState().combat.order.find(o=>o.id===e.id),i=n.statusEffects;for(let o=0;o<i.length;o++)if(i[o].function){const r=fe[i[o].function];r&&i[o].when===a&&r(t,n)}}function Ut(t,e,a,s){const n=u.getState().combat.order,i=n.findIndex(r=>r.id===e);if(i===void 0)return;const o=n[i].statusEffects;if(!o){console.log("Undefined variable");return}switch(a){case"REMOVE":for(let r=0;r<o.length;r++)o[r].duration<=0&&t(g.updateStatusEffects({id:e,statusEffect:o[r],change:"REMOVE"}));j(t,e);break;case"END":for(let r=0;r<o.length;r++)(o[r].durationType&&o[r].durationType==="ROUND"||o[r].durationType==="ACTION")&&t(g.updateStatusEffects({id:e,statusEffect:o[r],change:"REMOVE"}));j(t,e);break;case"DECREMENT":for(let r=0;r<o.length;r++)o[r].durationType===s&&t(g.updateStatusEffectDuration({id:e,name:o[r].name,change:"DECREMENT"}));break}}function Ct(t,e,a){let s,n;(a.name==="Burning"||a.name==="Chilled"||a.name==="Stunned"||a.name==="Poisoned"||a.name==="Diseased"||a.name==="Haunted"||a.name==="Cursed"||a.name==="Withered"||a.name==="Restrained")&&(s=!0),s&&(n=a.name.toLowerCase(),t(g.updateDamageDisplay({id:e.id,content:{item:a.name,style:n}})))}function j(t,e){let a,s;u.getState().ui.dashboardIsVisible?(a=u.getState().player,s=$):(a=(c=>u.getState().combat.order.find(R=>R.id===c))(e),s=g);let i=a.stats.baseStrength,o=0,r=0,m=0,p=a.stats.baseAgility,k=0,l=0,I=0,N=a.stats.baseArcana,U=0,W=0,F=0,z=null;if(a.statusEffects.length>0)for(let f=0;f<a.statusEffects.length;f++){const c=a.statusEffects[f];"stats"in c&&(c.stats&&c.stats.strength&&(i+=c.stats.strength.strengthChange||0,o+=c.stats.strength.maxHealth||0,r+=c.stats.strength.healthRegen||0,m+=c.stats.strength.attack||0),c.stats&&c.stats.agility&&(p+=c.stats.agility.agilityChange||0,k+=c.stats.agility.defense||0,l+=c.stats.agility.speed||0,I+=c.stats.agility.hitChance||0),c.stats&&c.stats.arcana&&(N+=c.stats.arcana.arcanaChange||0,U+=c.stats.arcana.maxMana||0,W+=c.stats.arcana.manaRegen||0,F+=c.stats.arcana.spellPower||0)),c.name==="Guarding"&&(z="GUARDING")}if(i<0&&(i=0),o+=Te(a,i),r+=Ie(i),m+=Ce(a,i),p<0&&(p=0),k+=De(z,p),l+=p,I+=p,N<0&&(N=0),U+=Me(a,N),W+=Oe(N),F+=ke(a,N),r<0&&(r=0),W<0&&(W=0),F<0&&(F=0),"summon"in a){const f=L("Summoned Dexterity");if(f)for(let R=0;R<f;R++)l++,I++;const c=L("Summoned Might");if(c)for(let R=0;R<c;R++)m+=2;const h=L("Summoned Resilience");if(h)for(let R=0;R<h;R++)o+=10}if(_(a,"Diseased")){const c=a.statusEffects.find(h=>h.name==="Diseased").stack*20/100*o;o=o-c}const{maxHealthBonus:he,healthRegenBonus:ge,attackBonus:pe,defenseBonus:Ee,speedBonus:be,hitChanceBonus:ye,maxManaBonus:Ae,manaRegenBonus:Re,spellPowerBonus:Ne}=Se(a);t(s.updateStats({id:a.id,totalStrength:i,maxHealth:o+he,healthRegen:r+ge,attack:m+pe,totalAgility:p,defense:k+Ee,speed:l+be,hitChance:I+ye,totalArcana:N,maxMana:U+Ae,manaRegen:W+Re,spellPower:F+Ne}));function Se(f){if(f.id!=="Player")return{maxHealthBonus:0,healthRegenBonus:0,attackBonus:0,defenseBonus:0,speedBonus:0,hitChanceBonus:0,maxManaBonus:0,manaRegenBonus:0,spellPowerBonus:0};const c={};let h={maxHealthBonus:0,healthRegenBonus:0,attackBonus:0,defenseBonus:0,speedBonus:0,hitChanceBonus:0,maxManaBonus:0,manaRegenBonus:0,spellPowerBonus:0};f.inventory.attunedItems.forEach(S=>{S.set&&(c[S.set]?c[S.set]++:c[S.set]=1)});let R;for(const S in c)if(c[S]===3){R=S;break}switch(R){case"Plagueborn Set":h.maxManaBonus+=500,h.maxHealthBonus+=500;break;case"Shadowbound Set":h.attackBonus+=1e3;break}return h}function Te(f,c){let h,R,S;return f.identifier==="PLAYER"?h=10*f.level+20:h=10*f.level,R=c*10,S=h+R,S}function Ie(f){let c=f*2;return c<0&&(c=0),c}function Ce(f,c){let h,R=c*2,S;return f.identifier==="PLAYER"?h=f.level*2+5:h=f.level*2+1,S=h+R,S}function Dt(f){return f}function De(f,c){let h=6+c;return f&&(h=Math.round(h*1.5)),h}function Mt(f){return f}function Me(f,c){let h,R,S;return f.identifier==="PLAYER"?h=10*f.level+30:c>0?h=10*f.level:h=0,R=c*10,S=h+R,S}function Oe(f){let c=f*2;return c<0&&(c=0),c}function ke(f,c){let h,R,S;return f.identifier==="PLAYER"?h=f.level*2+3:c>0?h=f.level*2:h=0,R=c*2,S=h+R,S}}function A(t,e){let a=[];for(let n=1;n<=e;n++)a.push(`${t}-${n}`);const s=Math.floor(Math.random()*a.length);return a[s]}function xt(t,e,a=1){for(let n=0;n<a;n++){let i;if(e.identifier==="HERO"){const o=s(e.name),r=V(o.stats);i={...o,stats:r,damageDisplay:[]}}if(e.identifier==="ENEMY"){const o=V(e.stats);i={...e,id:B(),stats:o,damageDisplay:[]}}e.abilityA&&(i.abilityA={...e.abilityA,cooldown:K(e.abilityA.reset)}),e.abilityB&&(i.abilityB={...e.abilityB,cooldown:K(e.abilityB.reset)}),t(g.addCharacter({character:i})),j(t,i.id),t(g.updateHealth({id:i.id,change:"HEAL",value:999}))}function s(n){const i=u.getState().hero.heroes;for(let o=0;o<i.length;o++)if(i[o].name===n)return i[o]}}function K(t){return Math.floor(Math.random()*(t+1))}export{P as C,$e as I,ie as T,b as U,O as a,Ut as b,V as c,L as d,It as e,T as f,Ht as g,wt as h,pt as i,St as j,A as k,de as l,Lt as m,xt as n,vt as o,Fe as p,G as q,Rt as r,fe as s,Bt as t,j as u,Pt as v,_ as w,_t as x};
